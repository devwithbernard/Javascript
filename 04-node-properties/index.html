<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Node properties</title>
</head>
<body>
    <div>
        <h2>Node Properties: type, tag and content</h2>
        <div>
            <h4>Counter: <span id="counter">0</span> </h4>
        </div>
        <div>
            <h3>Users:</h3>
            <ul id="users-list">

            </ul>
        </div>
        <div id="text-content">
            <h2>Text content</h2>
            <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. At debitis dolorem facilis illum ipsa officiis quasi quisquam rerum. Ab autem deserunt in iste possimus quae sunt? Deserunt dolorem labore vitae.</p>
        </div>
    </div>
    <script>
        class Input{
            /**
             *
             * @param {HTMLInputElement} element
             * @param {string} placeholder
             */
            constructor(element, placeholder) {
                this.element = element;
                this.element.placeholder = placeholder;
            }

            /**
             *
             * @param {HTMLElement} parent
             */
            addTo(parent) {
                parent.append(this.element);
            }

        }


        const newInput = new Input(document.createElement('input'), 'Add Todo...');
        newInput.addTo(document.body);

        // InnerHTML
        let counter = 0;

        const intervalId = setInterval(() => {
            if (counter >= 30) clearInterval(intervalId);

            document.querySelector('#counter').innerHTML = counter.toString();

            counter++;

        }, 1000)

        let id = 1;

        const intervalID = setInterval(async () => {
            const response = await fetch(`https://jsonplaceholder.typicode.com/users/${id}`);
            const todo = await response.json()

            if(!response.ok){
                clearInterval(intervalID);
            }else {
                document.querySelector("#users-list").innerHTML += `<li>${id}: ${todo.name}</li>`;
                id++;
            }
        }, 1000)

        // Text content
        const allTextContent = document.querySelector('#text-content').textContent;
        const texts = allTextContent.trim().split(('\n')).map(text => text.trim());

        const listItem = document.createElement('li');
        const ul = document.createElement('ul');
        const h2 = document.createElement('h2');
        const div = document.createElement('div');

        h2.innerText = 'Text list';

        div.append(h2)

        texts.forEach(text => {
            listItem.innerText = text;
            ul.append(listItem);
        })

        div.appendChild(ul);

        document.querySelector('#text-content').nextSibling.parentElement.append(div)




        // element.hidden
        const inter = setInterval(()=>{

            document.querySelector('h2').hidden = !document.querySelector('h2').hidden;

            document.querySelector('h2').addEventListener('mouseover', e => {
                clearInterval(inter);
            })
        }, 2000)

    </script>
</body>
</html>